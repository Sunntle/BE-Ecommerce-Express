<!DOCTYPE html>
<html>

<head>
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<style>
    form{
       width: clamp(300px,50%,500px );

    }
</style>
<body class="bg-secondary bg-opacity-10 position-relative">
    <%- include('header') %>
    <div class="container mt-5 ">
        <div class="wrap d-flex align-items-center justify-content-center">
            <form name="frmdk" method="POST" action="/users/doipass" class="border bg-dark bg-opacity-10 rounded p-4">
                <h1 class="text-center py-3">Đổi mật khẩu</h1>
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" name="username" id="floatingInput2" placeholder="name@example.com">
                    <label for="floatingInput2">Username</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="password" class="form-control" name="password" id="floatingInput3" placeholder="name@example.com">
                    <label for="floatingInput3">Password</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="password" class="form-control" name="newpassword" id="floatingInput5" placeholder="name@example.com">
                    <label for="floatingInput5">New Password</label>
                </div>
                <div class="mb-3"><span class="text-danger error" ></span></div>
                <a class="btn btn-secondary" id="cancel" href="/users/dangnhap">Hủy</a>
                <button class="btn btn-primary" id="confirm">Xác nhận</button>
            </form>
        </div>
    </div>
    </div>
    <% - include('footer') %>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script>
    const status = window.location.search
    const isSuccess = status.slice(1)
    const text = document.querySelector('.error')
    if(isSuccess === 'thanhcong'){
        text.textContent = 'Đổi mật khẩu thành công !'
        text.classList.add('text-success')
        text.classList.remove('text-danger')
    }else if(isSuccess === 'thatbai2'){
        text.textContent = 'Không tìm thấy username !'
    }else if(isSuccess === 'thatbai'){
        text.textContent = 'Mật khẩu cũ không đúng !'
    }
    const btnCancel = document.querySelector('#cancel')
    const btnConfirm = document.querySelector('#confirm')
    btnCancel.style.width =  btnConfirm.offsetWidth + 'px'
    btnConfirm.addEventListener('click',e=>{
        const invalidText = document.querySelector('input[name="newpassword"]').value
        if(!invalidText) {
            e.preventDefault()
            document.querySelector('.error').textContent = 'Mật khẩu mới không được để trống !'
        }
    })
</script>